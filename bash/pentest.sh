#!/bin/bash
clear

#Menu Display

function menu() {
echo "	1. DNS check"
echo "	2. Nmap Ping Sweep"
echo "	3. Quit"
echo "Choice: "
read choice
}

#DNS Scan function

function dns_scan() { 
echo "$(tput setaf 3)[*]$(tput sgr0) Enter the domain name"
read domain
dig $domain ANY +nostat +nocmd +nocomments > /root/$company/dns/dns.txt
echo "     "
echo "$(tput setaf 2)[*]$(tput sgr0) DNS scan output to DNS folder"
sleep 2
echo "   "
echo "$(tput setaf 3)[*]$(tput sgr0) Choose another option or Quit"
echo "   "
menu
}

#Nmap Ping sweep function

function ping_sweep() {
echo ">> Please enter IP/range"
        read ip_input
echo $ip_input >> /root/$company/hostlist.txt
echo "$(tput setaf 3)[+]$(tput sgr0) Running Ping sweep on $ip_input"
sleep 2
nmap -sP -iL /root/$company/nmap/hostlist.txt -oG pingscan > /dev/null
grep Up pingscan | awk '{print$2}' > /root/$company/nmap/ScanResult/uplist
grep Down pingscan | awk '{print$2}' > /root/$company/nmap/ScanResult/downlist
echo "     "
echo "$(tput setaf 2)[+]$(tput sgr0)Live hosts from '$ip_input'saved to /root/$company/nmap/"
echo "    "
sleep 2
menu
}



#######################################################################################
figlet -f big "PenScan"
echo "$(tput setaf 2)[*]$(tput sgr0) PenScan v1.0 by @InfoSecPS
echo "    "
echo "Enter name of Company"
read company
mkdir $company
cd $company
mkdir {dns,urls,nmap}
cd nmap
mkdir ScanResult
echo "$(tput setaf 2)[*]$(tput sgr0) Directories Created!"
echo "     "
sleep 2 
menu
########################################################################################

if [ $choice == "1" ]
then 
dns_scan
fi

if [ $choice == "2" ]
then
ping_sweep
fi

if [ $choice == "3" ]
then
exit
fi


